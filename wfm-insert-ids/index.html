
<h2>Bookmarklet</h2>

Drag this to bookmarks / favourite bar:
<a href="javascript:void%20function(){function%20t(t,r){var%20e=jQuery(r).find(%22th,td%22)[1];/uidspan/.test(e.innerHTML)||(e.innerHTML=%22[%22+jQuery(r).attr(%22uid%22)+%22]%20%20%22+e.innerHTML)}var%20r=window.top.frames.mctnt.frames.oRightPaneContent;r.jQuery(%22tr.tblRow,tr.tblRowSelect%22).each(t);try{var%20e=r.popupManager.oOpenedWindows.POPUP_WorkPatternSelection_1;e%26%26e.jQuery(%22tr.tblRow,tr.tblRowSelect%22).each(t)}catch(n){console.error(%22couldn't%20sort%20popup%22,n)}var%20o=r.workPatternList_table,i=window.prompt(%22IDs%20to%20insert%3F%20(comma%20delimited,%20e.g.%201,2,34,52)%22,%22%22);i%26%26i.split(%22,%22).map(function(t){return%20parseInt(t.trim())}).filter(function(t){return%20t||0===t}).forEach(function(t){o.appendRow(t,[%22%22+t])})}();">WFM add IDs</a>

<h2>Use</h2>

<ul>
<li> Install by dragging the link above to your favourites / bookmarklets bar.</li> 
<li> Then, on say the rotations page, click the newly created bookmarklet. You should be prompted for a list of IDs.</li>
<li> Enter these as a comma separated list, like this: 6,7,3</li>
<li> If you don't know the IDs, you can click the bookmarklet then cancel the prompt. It should add the IDs to the main table for items which have already been added. IDs are inserted in 
square brakcets, like this: [3]. The ID is just the number. </li>
</ul>
 
<h2>Demo</h2>

<img src="wfmInsertIds.gif alt="insert IDs demo video"/>

<h2>Source</h2>

Compressed:

<pre>
javascript:void%20function(){var%20n=window.top.frames.mctnt.frames.oRightPaneContent;try{var%20t=n.popupManager.oOpenedWindows.POPUP_WorkPatternSelection_1;console.log(t),t%26%26t.jQuery(%22tr.tblRow%22).each(function(n,t){var%20r=jQuery(t).find(%22td%22)[0];/uidspan/.test(r.innerHTML)||(r.innerHTML=%22%3Cspan%20id='uidspan'%3E%22+jQuery(t).attr(%22uid%22)+%22%20|%3C/span%3E%20%22+r.innerHTML)})}catch(r){console.error(%22couldn't%20sort%20popup%22,r)}var%20e=n.workPatternList_table,o=window.prompt(%22IDs%20to%20insert%3F%20(comma%20delimited,%20e.g.%201,2,34,52)%22);o%26%26o.split(%22,%22).map(function(n){return%20parseInt(n.trim())}).filter(function(n){return%20n||0===n}).forEach(function(n){e.appendRow(n,[%22%22+n])})}();

</pre>

Uncompressed:

<pre>
  var fr = window.top.frames['mctnt'].frames['oRightPaneContent'];

  function addIds(idx, val) {
    var td = jQuery(val).find('th,td')[1];
    if(!(/uidspan/.test(td.innerHTML))){
      td.innerHTML = ("<span id='uidspan'>[" +jQuery(val).attr('uid') + "] </span> ") + td.innerHTML;
    }
  }

  fr.jQuery('tr.tblRow,tr.tblRowSelect').each(addIds);
  
  try{
    var popup = fr.popupManager.oOpenedWindows.POPUP_WorkPatternSelection_1;
    if(popup){
      popup.jQuery('tr.tblRow,tr.tblRowSelect').each(addIds);
    }
  } catch (e){
    console.error("couldn't sort popup",e);
  }
  
  var table = fr.workPatternList_table;
  var idStr = window.prompt("IDs to insert? (comma delimited, e.g. 1,2,34,52)","");
  if(idStr){
    idStr
      .split(",")
      .map(function(x){return parseInt(x.trim())})
      .filter(function(id){return id || id ===0})
      .forEach(function(id){
        table.appendRow(id,[""+id])
      })
    ;
  }

</pre>
